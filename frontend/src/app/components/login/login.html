<form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form rounded-3xl bg-white shadow-md flex flex-col w-[400px] p-10">
  <h1 class="text-2xl mb-5 font-bold">Sign in</h1>

  <!-- GLOBAL ERROR (backend/server) -->
  <div *ngIf="error" class="bg-red-100 text-red-600 p-3 rounded-md mb-5 text-sm">
    <p>{{ errorMessage }}</p>
  </div>

  <!-- USERNAME -->
  <div class="relative w-full mb-5">
    <input 
      type="text"
      id="username"
      formControlName="username"
      class="peer p-2 w-full bg-white rounded border border-1 border-zinc-400 focus:outline-none focus:border-blue-500"
    />
    <label 
      for="username"
      [class]="'absolute left-2 transition-all duration-200 bg-white px-1 ' +
              (f['username'].value?.length > 0 ? '-top-3 text-xs text-blue-500' : 'top-2 text-base text-gray-400') +
              ' peer-focus:-top-3 peer-focus:text-xs peer-focus:text-blue-500'">
      Username
    </label>

    <!-- ERROR MESSAGE -->
    <div *ngIf="f['username'].touched && f['username'].invalid" class="text-red-500 text-sm mt-1">
      <div *ngIf="f['username'].errors?.['required']">Username is required.</div>
      <div *ngIf="f['username'].errors?.['minlength']">Minimum 3 characters.</div>
    </div>
  </div>

  <!-- PASSWORD -->
  <div class="relative w-full mb-5">
    <input 
      [type]="isShow ? 'text' : 'password'"
      id="password"
      formControlName="password"
      class="peer p-2 w-full rounded border border-1 border-zinc-400 focus:outline-none focus:border-blue-500"
    />
    <label 
      for="password"
      [class]="'absolute left-2 transition-all duration-200 bg-white px-1 ' +
              (f['password'].value?.length > 0 ? '-top-3 text-xs text-blue-500' : 'top-2 text-base text-gray-400') +
              ' peer-focus:-top-3 peer-focus:text-xs peer-focus:text-blue-500'">
      Password
    </label>

    <i 
      (click)="toggleShowPassword($event)" 
      class="absolute right-3 top-3 cursor-pointer"
      [ngClass]="isShow ? 'fa-solid fa-eye-slash' : 'fa-solid fa-eye'">
    </i>

    <!-- ERROR MESSAGE -->
    <div *ngIf="f['password'].touched && f['password'].invalid" class="text-red-500 text-sm mt-1">
      <div *ngIf="f['password'].errors?.['required']">Password is required.</div>
      <div *ngIf="f['password'].errors?.['minlength']">Minimum 6 characters.</div>
    </div>
  </div>

  <!-- SUBMIT -->
  <button type="submit" class="bg-blue-500 rounded-xl p-3 mb-3 text-white flex justify-center items-center" [disabled]="signin">
    @if(!signin) {
      Sign in
    } @else {
      <div class="animate-spin rounded-full h-6 w-6 border-4 border-white border-t-transparent"></div>
    }
  </button>

  <p>Don't have an account ? 
    <a class="text-blue-500" [routerLink]="['/signup']">Sign up</a>
  </p>
</form>